<div class="container-fluid">
  <div class="card">
    <div class="row card-body">
      <div class="col-md-12">
        <h4>CIERRE DE CAJA - {{Nombre_Funcionario}}</h4>
      </div>
      <div class="col-md-12">
        <div style="text-align: center; margin-top:10px; margin-bottom:10px;"  *ngIf="!Armado">
            <h2>CARGANDO DATOS DEL CIERRE</h2>
            <img src="{{globales.ruta}}IMAGENES/GIFS/reloj_arena_cargando.gif" style="width:250px;" alt="">
        </div>
        
        <table class="table table-striped table-bordered cierre-caja-table"  *ngIf="Armado">
          <thead>
            <tr>
              <th style="width:15%;"></th>
              <th *ngFor="let m of MonedasSistema" style="text-align:center;" colspan="2" [ngStyle]="{'background-color':m.Color}">
                <h4>{{m.Nombre}}</h4>
              </th>
            </tr>
            <tr>
              <th style="text-align:center;"><h4>Modulos</h4></th>
              <th *ngFor="let c of CeldasIngresoEgresoEncabezado" style="text-align:center;" [ngStyle]="{'background-color':c.Color}">
                <h6>{{c.Nombre_Celda}}</h6>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let m of Modulos;">
              <td>{{m}}</td>
              <td style="text-align:right;" *ngFor="let ie of CeldasIngresoEgresoEncabezado; let ind = index" [ngStyle]="{'background-color':Totales[m][ind].Color}">
                <label *ngIf="ind % 2 == 0">{{Totales[m][ind].Ingreso_Total | customcurrency:Totales[m][ind].Codigo}}</label>
                <label *ngIf="ind % 2 != 0">{{Totales[m][ind].Egreso_Total | customcurrency:Totales[m][ind].Codigo}}</label>
                  <!-- {{Totales[m][ind].Codigo}} {{ind % 2 == 0 ? Totales[m][ind].Ingreso_Total | customcurrency : Totales[m][ind].Egreso_Total | customcurrency}} -->
              </td>
            </tr>
            <tr>
              <td class="font-weight-bold font-size-12" style="text-align:right;color:black;"><b>Totales:</b></td>
              <td class="font-weight-bold font-size-12" style="text-align:right;color:black;" *ngFor="let mt of MostrarTotal" [ngStyle]="{'background-color':mt.Color}">{{mt.Total | customcurrency:''}}</td> 
            </tr>          
          </tbody>
        </table>
      </div>
    </div>

    <div class="row card-body" *ngIf="solo_ver">
      <div class="col-md-12">
        <table class="table table-striped table-bordered cierre-caja-table" *ngIf="Armado">
          <tbody>
            <tr>
              <td ><b>Monedas</b></td>
              <td style="text-align:center;" *ngFor="let m of MonedasSistema">{{m.Nombre}}</td>
            </tr>
            <tr>
              <td><b>Montos Iniciales</b></td>
              <td style="text-align:right;" *ngFor="let vm of ValoresMonedasApertura">{{vm | customcurrency:''}}</td>
            </tr>
            <tr>
              <td style="background:rgb(61, 230, 89);color:black;">Ingreso</td> 
              <td *ngFor="let ti of TotalesIngresosMonedas" style="text-align:right;background:rgb(61, 230, 89);color:black;">+{{ti | customcurrency:''}}</td>
            </tr>
            <tr>
              <td style="background:rgb(251, 59, 59);color:white;">Egreso</td>
              <td *ngFor="let te of TotalesEgresosMonedas" style="text-align:right;background:rgb(251, 59, 59);color:white;">-{{te | customcurrency:''}}</td>
            </tr>
            <tr>
              <td>Total a Entregar</td>
              <td style="text-align:right;" *ngFor="let resta of TotalRestaIngresosEgresos">{{resta | customcurrency:''}}</td>
            </tr>
            <tr>
              <td>Entregado</td>
              <td *ngFor="let t of TotalEntregado; let ind = index">
                <div class="input-group input-group-sm">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1">{{t.Codigo}}</span>
                  </div>                
                  <input type="text" class="form-control sp-text" [(ngModel)]="t.Entregado" name="Entregado_{{i}}"  aria-describedby="basic-addon1" placeholder="0" (blur)="CalcularDiferencia($event.target.value, ind)" [disabled]="FieldsDisabled[ind]">
                </div>
              </td>
            </tr>
            <tr>
              <td>Diferencia</td>
              <td style="text-align:right;" *ngFor="let d of Diferencias; let ind = index">
                {{d.Diferencia | customcurrency:''}}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="col-md-12" *ngIf="Armado">
        <label class="block-element">Observaciones</label>           
        <textarea style="width: 100%;" name="Observaciones" id="" rows="4" [(ngModel)]="CierreCajaModel.Observacion"></textarea>
      </div>
      <div class="col-md-12" *ngIf="Armado">
        <div class="row">
          <div class="col-md-12">
            <button class="btn btn-primary btn-block"
              [swal]="{title : '¿Está Seguro?', text: 'Se dispone a guardar el cierre de caja' , type : 'warning', showCancelButton : true , confirmButtonText: 'Si, Guardar',cancelButtonText: 'No,Dejame Comprobar!'}"
              (confirm)="GuardarCierre()">Guardar Cierre
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<swal #alertSwal type="" title="" text=""></swal>