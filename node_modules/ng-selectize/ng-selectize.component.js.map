{"version":3,"sources":["../src/ng-selectize.component.ts"],"names":[],"mappings":"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","file":"ng-selectize.component.js","sourceRoot":"","sourcesContent":["import {\r\n\tInput,\r\n\tOnInit,\r\n\tOnChanges,\r\n\tSimpleChanges,\r\n\tDoCheck,\r\n\tforwardRef,\r\n\tComponent,\r\n\tViewChild,\r\n\tOutput,\r\n\tRenderer2,\r\n\tEventEmitter, IterableDiffers, IterableDiffer, IterableChangeRecord, IterableChanges\r\n} from '@angular/core';\r\nimport {\r\n\tNG_VALUE_ACCESSOR, ControlValueAccessor, FormControl\r\n} from '@angular/forms';\r\n\r\ndeclare const $: any;\r\n\r\nimport cloneDeep from 'lodash.clonedeep';\r\n\r\nexport const SELECTIZE_VALUE_ACCESSOR: any = {\r\n\tprovide: NG_VALUE_ACCESSOR,\r\n\tuseExisting: forwardRef(() => NgSelectizeComponent),\r\n\tmulti: true\r\n};\r\n\r\n\r\nexport class NgSelectizeComponent implements OnInit, OnChanges, DoCheck, ControlValueAccessor {\r\n\r\n\t config: any;\r\n\tprivate _options: any[];\r\n\tprivate _options_differ: IterableDiffer<any>;\r\n\tprivate _optgroups: any[];\r\n\tprivate _optgroups_differ: IterableDiffer<any>;\r\n\r\n\t id: string;\r\n\t placeholder: string;\r\n\t hasOptionsPlaceholder: string;\r\n\t noOptionsPlaceholder: string;\r\n\t enabled = true;\r\n\t value: string[];\r\n\t formControl: FormControl;\r\n\t errorClass: string;\r\n\r\n\t onBlur: EventEmitter<void> = new EventEmitter<void>(false);\r\n\r\n\t selectizeInput: any;\r\n\r\n\tprivate selectize: any;\r\n\r\n\t// Control value accessors.\r\n\tprivate onTouchedCallback: () => {};\r\n\tprivate onChangeCallback: (_: any) => {};\r\n\r\n\tconstructor(private _differs: IterableDiffers, private renderer: Renderer2) {\r\n\t}\r\n\r\n\tngOnInit(): void {\r\n\t\tif (this.id && this.id.length > 0) {\r\n\t\t\tthis.renderer.setAttribute(this.selectizeInput.nativeElement, 'id', this.id);\r\n\t\t}\r\n\t\tthis.reset();\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.selectize = $(this.selectizeInput.nativeElement).selectize(this.config)[0].selectize;\r\n\t\tthis.selectize.on('change', this.onSelectizeValueChange.bind(this));\r\n\t\tthis.selectize.on('blur', this.onBlurEvent.bind(this));\r\n\r\n\t\tthis.updatePlaceholder();\r\n\t\tthis.onEnabledStatusChange();\r\n\t}\r\n\r\n\t/**\r\n\t * Change detection for primitive types.\r\n\t */\r\n\tngOnChanges(changes: SimpleChanges): void {\r\n\t\tif (this.selectize) {\r\n\t\t\tif (changes.hasOwnProperty('placeholder') || changes.hasOwnProperty('hasOptionsPlaceholder')\r\n\t\t\t\t|| changes.hasOwnProperty('noOptionsPlaceholder')) {\r\n\t\t\t\tthis.updatePlaceholder();\r\n\t\t\t}\r\n\t\t\tif (changes.hasOwnProperty('enabled')) {\r\n\t\t\t\tthis.onEnabledStatusChange();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Implementing deep check for option comparison\r\n\t *\r\n\t * FIXME -> Implement deep check to only compare against label and value fields.\r\n\t */\r\n\tngDoCheck(): void {\r\n\t\tif (this._options_differ) {\r\n\t\t\tconst changes = this._options_differ.diff(this._options);\r\n\t\t\tif (changes) {\r\n\t\t\t\tthis._applyOptionsChanges(changes);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._optgroups_differ) {\r\n\t\t\tconst changes = this._optgroups_differ.diff(this._optgroups);\r\n\t\t\tif (changes) {\r\n\t\t\t\tthis._applyOptionGroupChanges(changes);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _applyOptionsChanges(changes: IterableChanges<any>): void {\r\n\t\tchanges.forEachAddedItem((record: IterableChangeRecord<any>) => {\r\n\t\t\tthis.onSelectizeOptionAdd(record.item);\r\n\t\t});\r\n\t\tchanges.forEachRemovedItem((record: IterableChangeRecord<any>) => {\r\n\t\t\tthis.onSelectizeOptionRemove(record.item);\r\n\t\t});\r\n\t\tthis.updatePlaceholder();\r\n\t\tthis.evalHasError();\r\n\t}\r\n\r\n\tprivate _applyOptionGroupChanges(changes: any): void {\r\n\t\tchanges.forEachAddedItem((record: IterableChangeRecord<any>) => {\r\n\t\t\tthis.onSelectizeOptGroupAdd(record.item);\r\n\t\t});\r\n\t\tchanges.forEachRemovedItem((record: IterableChangeRecord<any>) => {\r\n\t\t\tthis.onSelectizeOptGroupRemove(record.item);\r\n\t\t});\r\n\t\tthis.updatePlaceholder();\r\n\t\tthis.evalHasError();\r\n\t}\r\n\r\n\tonBlurEvent() {\r\n\t\tif (this.formControl) {\r\n\t\t\tthis.formControl.markAsTouched();\r\n\t\t}\r\n\t\tthis.onBlur.emit();\r\n\t\tthis.evalHasError();\r\n\t}\r\n\r\n\tonSelectizeOptGroupAdd(optgroup: any): void {\r\n\t\tthis.selectize.addOptionGroup(optgroup[this.getOptgroupField()], optgroup);\r\n\t}\r\n\r\n\tonSelectizeOptGroupRemove(optgroup: any): void {\r\n\t\tthis.selectize.removeOptionGroup(optgroup[this.getOptgroupField()]);\r\n\t}\r\n\r\n\t/**\r\n\t * Refresh selected values when options change.\r\n\t */\r\n\tonSelectizeOptionAdd(option: any): void {\r\n\t\tthis.selectize.addOption(cloneDeep(option));\r\n\t\tconst valueField = this.getValueField();\r\n\t\tif (this.value) {\r\n\t\t\tconst items = (typeof this.value === 'string' || typeof this.value === 'number') ? [this.value] : this.value;\r\n\t\t\tif (items && items instanceof Array && items.find(value => value === option[valueField])) {\r\n\t\t\t\tthis.selectize.addItem(option[valueField], true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSelectizeOptionRemove(option: any): void {\r\n\t\tthis.selectize.removeOption(option[this.getValueField()]);\r\n\t}\r\n\r\n\tevalHasError() {\r\n\t\tconst parent = $(this.selectize.$control).parent();\r\n\t\tif (this.formControl) {\r\n\t\t\tif (this.formControl.touched && this.formControl.invalid) {\r\n\t\t\t\tparent.addClass(this.errorClass || 'has-error');\r\n\t\t\t} else if (parent.hasClass('has-error')) {\r\n\t\t\t\tparent.removeClass(this.errorClass || 'has-error');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Update the current placeholder based on the given input parameter.\r\n\t */\r\n\tupdatePlaceholder(): void {\r\n\t\tif (this.selectize.items.length === 0 && this.selectize.settings.placeholder !== this.getPlaceholder()) {\r\n\t\t\tthis.selectize.settings.placeholder = this.getPlaceholder();\r\n\t\t\tthis.selectize.updatePlaceholder();\r\n\t\t\tthis.selectize.showInput(); // Without this, when options are cleared placeholder only appears after focus.\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Called when a change is detected in the 'enabled' input field.\r\n\t * Sets the selectize state based on the new value.\r\n\t */\r\n\tonEnabledStatusChange(): void {\r\n\t\tthis.enabled ? this.selectize.enable() : this.selectize.disable();\r\n\t}\r\n\r\n\t/**\r\n\t * Dispatches change event when a value change is detected.\r\n\t * @param $event\r\n\t */\r\n\tonSelectizeValueChange($event: any): void {\r\n\t\t// In some cases this gets called before registerOnChange.\r\n\t\tif (this.onChangeCallback) {\r\n\t\t\tthis.onChangeCallback(this.selectize.getValue());\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the applicable placeholder.\r\n\t */\r\n\tgetPlaceholder(): string {\r\n\t\tif (this.hasOptionsPlaceholder) {\r\n\t\t\tif (this.options && this.options.length > 0) {\r\n\t\t\t\treturn this.hasOptionsPlaceholder;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.noOptionsPlaceholder) {\r\n\t\t\tif (!this.options || this.options.length === 0) {\r\n\t\t\t\treturn this.noOptionsPlaceholder;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.placeholder;\r\n\t}\r\n\r\n\t/**\r\n\t * Implementation from ControlValueAccessor\r\n\t *\r\n\t * Empty check on 'obj' removed due to restriction on resetting the field.\r\n\t * From testing, async should still function appropriately.\r\n\t *\r\n\t * FIXME This might not be necessary anymore..\r\n\t *\r\n\t * @param obj\r\n\t */\r\n\twriteValue(obj: any): void {\r\n\t\tif (obj !== this.value) {\r\n\t\t\tthis.value = obj;\r\n\t\t}\r\n\t\tthis.selectize.setValue(this.value);\r\n\t}\r\n\r\n\t/**\r\n\t * Implementation from ControlValueAccessor, callback for (ngModelChange)\r\n\t * @param fn\r\n\t */\r\n\tregisterOnChange(fn: any): void {\r\n\t\tthis.onChangeCallback = fn;\r\n\t}\r\n\r\n\t/**\r\n\t * Implementation from ControlValueAccessor\r\n\t * @param fn\r\n\t */\r\n\tregisterOnTouched(fn: any): void {\r\n\t\tthis.onTouchedCallback = fn;\r\n\t}\r\n\r\n\tgetValueField(): string {\r\n\t\treturn this.config['valueField'] ? this.config['valueField'] : 'value';\r\n\t}\r\n\r\n\tgetOptgroupField(): string {\r\n\t\treturn this.config['optgroupField'] ? this.config['optgroupField'] : 'optgroup';\r\n\t}\r\n\r\n\t\r\n\tset options(value: any[]) {\r\n\t\tthis._options = value;\r\n\t\tif (!this._options_differ && value) {\r\n\t\t\tthis._options_differ = this._differs.find(value).create();\r\n\t\t}\r\n\t}\r\n\r\n\tget options(): any[] {\r\n\t\treturn this._options;\r\n\t}\r\n\r\n\t\r\n\tset optgroups(value: any[]) {\r\n\t\tthis._optgroups = value;\r\n\t\tif (!this._optgroups_differ && value) {\r\n\t\t\tthis._optgroups_differ = this._differs.find(value).create();\r\n\t\t}\r\n\t}\r\n\r\n\tget optgroups(): any[] {\r\n\t\treturn this._optgroups;\r\n\t}\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\r\n\tselector: 'ng-selectize',\r\n\ttemplate: `<select #selectizeInput></select>`,\r\n\tproviders: [SELECTIZE_VALUE_ACCESSOR]\r\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: IterableDiffers, },\n{type: Renderer2, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'config': [{ type: Input },],\n'id': [{ type: Input },],\n'placeholder': [{ type: Input },],\n'hasOptionsPlaceholder': [{ type: Input },],\n'noOptionsPlaceholder': [{ type: Input },],\n'enabled': [{ type: Input },],\n'value': [{ type: Input },],\n'formControl': [{ type: Input },],\n'errorClass': [{ type: Input },],\n'onBlur': [{ type: Output },],\n'selectizeInput': [{ type: ViewChild, args: ['selectizeInput', ] },],\n'options': [{ type: Input },],\n'optgroups': [{ type: Input },],\n};\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}