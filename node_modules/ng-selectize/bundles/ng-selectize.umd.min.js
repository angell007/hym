!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("lodash.clonedeep")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/forms","lodash.clonedeep"],t):t(e["ng-selectize"]=e["ng-selectize"]||{},e.ng.core,e.ng.forms,e.cloneDeep)}(this,function(e,t,o,i){"use strict";i="default"in i?i.default:i;var n={provide:o.NG_VALUE_ACCESSOR,useExisting:t.forwardRef(function(){return r}),multi:!0},r=function(){function e(e,o){this._differs=e,this.renderer=o,this.enabled=!0,this.onBlur=new t.EventEmitter(!1)}return e.prototype.ngOnInit=function(){this.id&&this.id.length>0&&this.renderer.setAttribute(this.selectizeInput.nativeElement,"id",this.id),this.reset()},e.prototype.reset=function(){this.selectize=$(this.selectizeInput.nativeElement).selectize(this.config)[0].selectize,this.selectize.on("change",this.onSelectizeValueChange.bind(this)),this.selectize.on("blur",this.onBlurEvent.bind(this)),this.updatePlaceholder(),this.onEnabledStatusChange()},e.prototype.ngOnChanges=function(e){this.selectize&&((e.hasOwnProperty("placeholder")||e.hasOwnProperty("hasOptionsPlaceholder")||e.hasOwnProperty("noOptionsPlaceholder"))&&this.updatePlaceholder(),e.hasOwnProperty("enabled")&&this.onEnabledStatusChange())},e.prototype.ngDoCheck=function(){if(this._options_differ){var e=this._options_differ.diff(this._options);e&&this._applyOptionsChanges(e)}if(this._optgroups_differ){var e=this._optgroups_differ.diff(this._optgroups);e&&this._applyOptionGroupChanges(e)}},e.prototype._applyOptionsChanges=function(e){var t=this;e.forEachAddedItem(function(e){t.onSelectizeOptionAdd(e.item)}),e.forEachRemovedItem(function(e){t.onSelectizeOptionRemove(e.item)}),this.updatePlaceholder(),this.evalHasError()},e.prototype._applyOptionGroupChanges=function(e){var t=this;e.forEachAddedItem(function(e){t.onSelectizeOptGroupAdd(e.item)}),e.forEachRemovedItem(function(e){t.onSelectizeOptGroupRemove(e.item)}),this.updatePlaceholder(),this.evalHasError()},e.prototype.onBlurEvent=function(){this.formControl&&this.formControl.markAsTouched(),this.onBlur.emit(),this.evalHasError()},e.prototype.onSelectizeOptGroupAdd=function(e){this.selectize.addOptionGroup(e[this.getOptgroupField()],e)},e.prototype.onSelectizeOptGroupRemove=function(e){this.selectize.removeOptionGroup(e[this.getOptgroupField()])},e.prototype.onSelectizeOptionAdd=function(e){this.selectize.addOption(i(e));var t=this.getValueField();if(this.value){var o="string"==typeof this.value||"number"==typeof this.value?[this.value]:this.value;o&&o instanceof Array&&o.find(function(o){return o===e[t]})&&this.selectize.addItem(e[t],!0)}},e.prototype.onSelectizeOptionRemove=function(e){this.selectize.removeOption(e[this.getValueField()])},e.prototype.evalHasError=function(){var e=$(this.selectize.$control).parent();this.formControl&&(this.formControl.touched&&this.formControl.invalid?e.addClass(this.errorClass||"has-error"):e.hasClass("has-error")&&e.removeClass(this.errorClass||"has-error"))},e.prototype.updatePlaceholder=function(){0===this.selectize.items.length&&this.selectize.settings.placeholder!==this.getPlaceholder()&&(this.selectize.settings.placeholder=this.getPlaceholder(),this.selectize.updatePlaceholder(),this.selectize.showInput())},e.prototype.onEnabledStatusChange=function(){this.enabled?this.selectize.enable():this.selectize.disable()},e.prototype.onSelectizeValueChange=function(e){this.onChangeCallback&&this.onChangeCallback(this.selectize.getValue())},e.prototype.getPlaceholder=function(){return this.hasOptionsPlaceholder&&this.options&&this.options.length>0?this.hasOptionsPlaceholder:!this.noOptionsPlaceholder||this.options&&0!==this.options.length?this.placeholder:this.noOptionsPlaceholder},e.prototype.writeValue=function(e){e!==this.value&&(this.value=e),this.selectize.setValue(this.value)},e.prototype.registerOnChange=function(e){this.onChangeCallback=e},e.prototype.registerOnTouched=function(e){this.onTouchedCallback=e},e.prototype.getValueField=function(){return this.config.valueField?this.config.valueField:"value"},e.prototype.getOptgroupField=function(){return this.config.optgroupField?this.config.optgroupField:"optgroup"},Object.defineProperty(e.prototype,"options",{get:function(){return this._options},set:function(e){this._options=e,!this._options_differ&&e&&(this._options_differ=this._differs.find(e).create())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"optgroups",{get:function(){return this._optgroups},set:function(e){this._optgroups=e,!this._optgroups_differ&&e&&(this._optgroups_differ=this._differs.find(e).create())},enumerable:!0,configurable:!0}),e}();r.decorators=[{type:t.Component,args:[{selector:"ng-selectize",template:"<select #selectizeInput></select>",providers:[n]}]}],r.ctorParameters=function(){return[{type:t.IterableDiffers},{type:t.Renderer2}]},r.propDecorators={config:[{type:t.Input}],id:[{type:t.Input}],placeholder:[{type:t.Input}],hasOptionsPlaceholder:[{type:t.Input}],noOptionsPlaceholder:[{type:t.Input}],enabled:[{type:t.Input}],value:[{type:t.Input}],formControl:[{type:t.Input}],errorClass:[{type:t.Input}],onBlur:[{type:t.Output}],selectizeInput:[{type:t.ViewChild,args:["selectizeInput"]}],options:[{type:t.Input}],optgroups:[{type:t.Input}]};var s=function(){function e(){}return e}();s.decorators=[{type:t.NgModule,args:[{declarations:[r],exports:[r]}]}],s.ctorParameters=function(){return[]},e.NgSelectizeModule=s,e.NgSelectizeComponent=r,Object.defineProperty(e,"__esModule",{value:!0})});