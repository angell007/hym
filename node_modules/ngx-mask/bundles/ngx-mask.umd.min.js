!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms")):"function"==typeof define&&define.amd?define("ngx-mask",["exports","@angular/core","@angular/common","@angular/forms"],t):t(e["ngx-mask"]={},e.ng.core,e.ng.common,e.ng.forms)}(this,function(e,r,n,t){"use strict";var o=new r.InjectionToken("config"),a=new r.InjectionToken("NEW_CONFIG"),i=new r.InjectionToken("INITIAL_CONFIG"),s={clearIfNotMatch:!1,showTemplate:!1,dropSpecialCharacters:!0,specialCharacters:["/","(",")",".",":","-"," ","+",",","@","[","]"],patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")}}},c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function p(n,o){var a,i,s,e,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),"throw":t(1),"return":t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){return function t(e){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,i&&(s=2&e[0]?i["return"]:e[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,i=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(s=0<(s=c.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){c.label=e[1];break}if(6===e[0]&&c.label<s[1]){c.label=s[1],s=e;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(e);break}s[2]&&c.ops.pop(),c.trys.pop();continue}e=o.call(n,c)}catch(t){e=[6,t],i=0}finally{a=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([r,e])}}}var l=function(){function e(e){this._config=e,this._shift=new Set,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns}return e.prototype.applyMask=function(e,t,r,n){if(void 0===r&&(r=0),void 0===n&&(n=function(){}),e===undefined||null===e||t===undefined)return"";for(var o=0,a="",i=!1,s=e.toString().split(""),c=0,p=s[0];c<s.length&&o!==t.length;p=s[++c])if(this._checkSymbolMask(p,t[o])&&"?"===t[o+1])a+=p,o+=2;else if(this._checkSymbolMask(p,t[o])&&"*"===t[o+1])a+=p,i=!0;else if("*"===t[o+1]&&i&&this._checkSymbolMask(p,t[o+2]))a+=p,o+=3,i=!1;else if("?"===t[o+1]&&this._checkSymbolMask(p,t[o+2]))a+=p,o+=3;else if(this._checkSymbolMask(p,t[o]))a+=p,o++;else if(-1!==this.maskSpecialCharacters.indexOf(t[o])){a+=t[o],o++;var l=/\*|\?/g.test(t.slice(0,o))?s.length:o;this._shift.add(l),c--}else-1<this.maskSpecialCharacters.indexOf(p)&&this.maskAvailablePatterns[t[o]]&&this.maskAvailablePatterns[t[o]].optional&&(o++,c--);a.length+1===t.length&&-1!==this.maskSpecialCharacters.indexOf(t[t.length-1])&&(a+=t[t.length-1]);for(var u=1,f=r+1;this._shift.has(f);)u++,f++;return n(this._shift.has(r)?u:0),a},e.prototype._checkSymbolMask=function(e,t){return e===t||this.maskAvailablePatterns[t]&&this.maskAvailablePatterns[t].pattern&&this.maskAvailablePatterns[t].pattern.test(e)},e.decorators=[{type:r.Injectable}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:r.Inject,args:[o]}]}]},e}(),u=function(a){function e(e,t,r,n){var o=a.call(this,t)||this;return o.document=e,o._config=t,o._elementRef=r,o._renderer=n,o.maskExpression="",o.onChange=function(e){},o.onTouch=function(){},o.clearIfNotMatch=o._config.clearIfNotMatch,o.dropSpecialCharacters=o._config.dropSpecialCharacters,o.maskSpecialCharacters=o._config.specialCharacters,o.maskAvailablePatterns=o._config.patterns,o._formElement=o._elementRef.nativeElement,o}return function t(e,t){function r(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(e,a),e.prototype.applyMask=function(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=function(){});var o=a.prototype.applyMask.call(this,e,t,r,n);return Array.isArray(this.dropSpecialCharacters)?this.onChange(this._removeMask(o,this.dropSpecialCharacters)):!0===this.dropSpecialCharacters?this.onChange(this._removeMask(o,this.maskSpecialCharacters)):this.onChange(o),o},e.prototype.applyValueChanges=function(e,t){void 0===e&&(e=0),void 0===t&&(t=function(){});var r=this.applyMask(this._formElement.value,this.maskExpression,e,t);this._formElement.value=r,this._formElement!==this.document.activeElement&&this.clearIfNotMatchFn()},e.prototype.clearIfNotMatchFn=function(){!0===this.clearIfNotMatch&&this.maskExpression.length!==this._formElement.value.length&&(this.formElementProperty=["value",""])},Object.defineProperty(e.prototype,"formElementProperty",{set:function(e){var t=function r(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a["return"])&&r.call(a)}finally{if(o)throw o.error}}return i}(e,2),n=t[0],o=t[1];this._renderer.setProperty(this._formElement,n,o)},enumerable:!0,configurable:!0}),e.prototype._removeMask=function(e,t){return e?e.replace(this._regExpForRemove(t),""):e},e.prototype._regExpForRemove=function(e){return new RegExp(e.map(function(e){return"\\"+e}).join("|"),"gi")},e.decorators=[{type:r.Injectable}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:r.Inject,args:[n.DOCUMENT]}]},{type:undefined,decorators:[{type:r.Inject,args:[o]}]},{type:r.ElementRef},{type:r.Renderer2}]},e}(l),f=function(){function e(e,t){this.document=e,this._maskService=t,this._position=null,this.onChange=function(e){},this.onTouch=function(){}}return Object.defineProperty(e.prototype,"maskExpression",{set:function(e){this._maskValue=e||"",this._maskValue&&(this._maskService.maskExpression=this._maskValue,this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specialCharacters",{set:function(e){e&&Array.isArray(e)&&(!Array.isArray(e)||e.length)&&(this._maskService.maskSpecialCharacters=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"patterns",{set:function(e){e&&(this._maskService.maskAvailablePatterns=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropSpecialCharacters",{set:function(e){this._maskService.dropSpecialCharacters=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTemplate",{set:function(e){this._maskService.showTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clearIfNotMatch",{set:function(e){this._maskService.clearIfNotMatch=e},enumerable:!0,configurable:!0}),e.prototype.onInput=function(e){var t=e.target;if(this._inputValue=t.value,this._maskValue){var r=t.selectionStart,n=0;this._maskService.applyValueChanges(r,function(e){return n=e}),this.document.activeElement===t&&(t.selectionStart=t.selectionEnd=null!==this._position?this._position:r+("deleteContentBackward"===e.inputType?0:n),this._position=null)}else this.onChange(t.value)},e.prototype.onBlur=function(){this._maskService.clearIfNotMatchFn(),this.onTouch()},e.prototype.onPaste=function(){this._position=Number.MAX_SAFE_INTEGER},e.prototype.writeValue=function(t){return function e(t,i,s,c){return new(s||(s=Promise))(function(e,r){function n(e){try{a(c.next(e))}catch(t){r(t)}}function o(e){try{a(c["throw"](e))}catch(t){r(t)}}function a(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}a((c=c.apply(t,i||[])).next())})}(this,void 0,void 0,function(){return p(this,function(e){return t===undefined||(t&&this._maskService.maskExpression?this._maskService.formElementProperty=["value",this._maskService.applyMask(t,this._maskService.maskExpression)]:this._maskService.formElementProperty=["value",t],this._inputValue=t),[2]})})},e.prototype.registerOnChange=function(e){this.onChange=e,this._maskService.onChange=this.onChange},e.prototype.registerOnTouched=function(e){this.onTouch=e},e.prototype.setDisabledState=function(e){this._maskService.formElementProperty=["disabled",e]},e.decorators=[{type:r.Directive,args:[{selector:"[mask]",providers:[{provide:t.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return e}),multi:!0},u]}]}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:r.Inject,args:[n.DOCUMENT]}]},{type:u}]},e.propDecorators={maskExpression:[{type:r.Input,args:["mask"]}],specialCharacters:[{type:r.Input}],patterns:[{type:r.Input}],dropSpecialCharacters:[{type:r.Input}],showTemplate:[{type:r.Input}],clearIfNotMatch:[{type:r.Input}],onInput:[{type:r.HostListener,args:["input",["$event"]]}],onBlur:[{type:r.HostListener,args:["blur"]}],onPaste:[{type:r.HostListener,args:["paste"]}]},e}(),h=function(){function e(e){this._maskService=e}return e.prototype.transform=function(e,t){return this._maskService.applyMask(""+e,t)},e.decorators=[{type:r.Pipe,args:[{name:"mask",pure:!0}]}],e.ctorParameters=function(){return[{type:l}]},e}(),m=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:a,useValue:e},{provide:i,useValue:s},{provide:o,useFactory:y,deps:[i,a]}]}},t.decorators=[{type:r.NgModule,args:[{providers:[l],exports:[f,h],declarations:[f,h]}]}],t}();function y(e,t){return"function"==typeof t?t():function(){return e=Object.assign||function e(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e.apply(this,arguments)}({},e,t)}e.config=o,e.NEW_CONFIG=a,e.INITIAL_CONFIG=i,e.initialConfig=s,e.MaskDirective=f,e.MaskService=u,e.NgxMaskModule=m,e._configFactory=y,e.ɵa=l,e.ɵb=h,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-mask.umd.min.js.map