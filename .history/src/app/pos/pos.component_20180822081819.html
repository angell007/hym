<div class="container-fluid">
    <div class="row">
        <div class="col-md-3">
            <sticky [sticky-offset-top]="95">
                <a href="#cambios" scrollTo class="card mrg-btm-15 scroll-to" (click)="muestra_tabla('cambios')" >
                    <div class="card-block padding-10">
                        <ul class="list-unstyled list-info">
                            <li>
                                <span class="thumb-img pdd-top-10">
                                    <i class="ti-calendar text-primary font-size-30"></i>
                                </span>
                                <div class="info">
                                    <b class="text-dark font-size-18">Cambios Efectivo</b>
                                    <p class="no-mrg-btm ">Compras o Ventas</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </a>
                <a href="#transferencias" scrollTo class="card mrg-btm-15 scroll-to" (click)="muestra_tabla('transferencias')">
                    <div class="card-block padding-10">
                        <ul class="list-unstyled list-info">
                            <li>
                                <span class="thumb-img pdd-top-10">
                                    <i class="ti-control-shuffle text-primary font-size-30"></i>
                                </span>
                                <div class="info">
                                    <b class="text-dark font-size-18">Recibos Transferencia</b>
                                    <p class="no-mrg-btm ">A cuentas Extranjeras</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </a>
                <a href="#giros" scrollTo class="card mrg-btm-15 scroll-to" (click)="muestra_tabla('giros')">
                    <div class="card-block padding-10">
                        <ul class="list-unstyled list-info">
                            <li>
                                <span class="thumb-img pdd-top-10">
                                    <i class="ti-wallet text-success font-size-30"></i>
                                </span>
                                <div class="info">
                                    <b class="text-dark font-size-18">Giros</b>
                                    <p class="no-mrg-btm">Envío/Recepción Dinero</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </a>
                <a href="#traslados" scrollTo class="card mrg-btm-15 scroll-to" (click)="muestra_tabla('traslados')">
                    <div class="card-block padding-10">
                        <ul class="list-unstyled list-info">
                            <li>
                                <span class="thumb-img pdd-top-10">
                                    <i class="ti-reload text-info font-size-30"></i>
                                </span>
                                <div class="info">
                                    <b class="text-dark font-size-18">Traslados</b>
                                    <p class="no-mrg-btm">Entre Cajas de la Empresa</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </a>
                <a href="#corresponsal" scrollTo class="card mrg-btm-15 scroll-to" (click)="muestra_tabla('corresponsal')">
                    <div class="card-block padding-10">
                        <ul class="list-unstyled list-info">
                            <li>
                                <span class="thumb-img pdd-top-10">
                                    <i class="ti-money text-warning font-size-30"></i>
                                </span>
                                <div class="info">
                                    <b class="text-dark font-size-18">Corresponsal Bancario</b>
                                    <p class="no-mrg-btm">Saldo del día</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </a>
                <a href="#servicios" scrollTo class="card mrg-btm-15 scroll-to" (click)="muestra_tabla('servicios')">
                    <div class="card-block padding-10">
                        <ul class="list-unstyled list-info">
                            <li>
                                <span class="thumb-img pdd-top-10">
                                    <i class="ti-truck text-danger font-size-30"></i>
                                </span>
                                <div class="info">
                                    <b class="text-dark font-size-18">Servicios Externos</b>
                                    <p class="no-mrg-btm">Consignaciones, Pagos, Trámites</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </a>
            </sticky>
        </div>
        <div class="col-md-9">
            <div class="card modulos" id="cambios">
                <div class="card-block">
                    <ul class="list-unstyled list-info">
                        <li>
                            <span class="thumb-img pdd-top-10">
                                <i class="ti-calendar text-primary font-size-30"></i>
                            </span>
                            <div class="info">
                                <b class="text-dark font-size-22">Cambios Efectivo</b>
                                <p class="no-mrg-btm ">Compras o Ventas</p>
                            </div>
                        </li>
                    </ul>
                    <div class="mrg-top-10" style="min-height: 470px;">
                        <div class="row" id="cambios1">
                            <div class="col-md-6">
                                <button class="btn btn-info btn-block mrg-top-10 btn-grande" >COMPRA</button>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-success btn-block mrg-top-10 btn-grande" >VENTA</button>
                            </div>
                            
                            <div class="col-md-12">
                                <hr>
                                <h5>Últimos Cambios Registrados</h5>
                                <div class="table-responsive">
                                    <table class="table table-hover table-sm table-striped" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
                                        <thead>
                                        <tr>
                                            <th style="width:60px;">Hora</th>
                                            <th>Código</th>
                                            <th>Tipo</th>
                                            <th>Valor</th>
                                            <th style="width:80px">Tasa</th>
                                            <th style="width:160px;"></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr *ngFor="let cambio of Cambios">
                                            <td>{{cambio.Fecha | date:"HH:mm" }}</td>
                                            <td>{{cambio.Codigo}}</td>
                                            <td>{{cambio.Tipo}}</td>
                                            <td class="text-right">{{cambio.Valor_Origen | currency }}</td>
                                            <td class="text-right">{{cambio.Tasa}}</td>
                                            
                                            <td class="text-center">
                                            <button class="btn btn-default btn-xs" type="button" style="margin:0;" (click)="VerEgreso(Egreso.Id_Egreso, ModalVerEgreso)">
                                                <i class="ti-printer"></i>
                                            </button>
                                            <button class="btn btn-default btn-xs" type="button" style="margin:0;" (click)="EditarCambio(cambio.Id_Cambio, ModalEditarCambio)">
                                                <i class="ti-pencil"></i>
                                            </button>
                                            <button class="btn btn-default btn-xs" type="button" style="margin:0;" (click)="EditarCambio(cambio.Id_Cambio, ModalEditarCambio)">
                                                    <i class="ti-reload"></i>
                                                </button>
                                            <button class="btn btn-default btn-xs" type="button" style="margin:0;" [swal]="{title:'¿Está Seguro?',text : 'Se dispone a anular este cambio, esta acción no se puede revertir' , type:'warning', showCancelButton: true, confirmButtonText: 'Si, Anular', cancelButtonText:'No, Dejame Comprobar!'}"
                                                (confirm)="AnulaCambio(cambio.Id_Cambio)">
                                                <i class="ti-close"></i>
                                            </button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    </div>
                            </div>
                        </div>
                        <div class="row" id="cambios2" style="display:none;">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>Moneda Origen</label>
                                    <select class="form-control" placeholder="Origen" ngModel id="Origen" name="Origen">
                                        <option> Seleccione Moneda</option>
                                        <option *ngFor="let moneda of Monedas" [value]="moneda.Id_Moneda">{{moneda.Nombre}} ({{ moneda.Codigo }}) </option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label>Destino</label>
                                    <select class="form-control" placeholder="Destino"  id="Destino" name="Destino" ngModel (change)="CambiarTasa($event.target.value);">
                                            <option> Seleccione Moneda</option>
                                            <option *ngFor="let moneda of Monedas" [value]="moneda.Id_Moneda">{{moneda.Nombre}} ({{ moneda.Codigo }}) </option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label>Tasa Cambio</label>
                                    <input readonly type="text" placeholder="Cambio" class="form-control" id="Precio_Sugerido" name="Precio_Sugerido" ngModel="{{PrecioSugerido}}">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group mrg-top-40">
                                    <label>Valor</label>
                                    <input type="text" placeholder="Valor" class="form-control" id="Valor"  name="Valor" ngModel>
                                </div>

                                <div class="form-group">
                                    <label>Vueltos</label>
                                    <input readonly type="text" placeholder="Vueltos" class="form-control" name="Vueltos" ngModel="{{vueltos}}">
                                </div>
                            </div> 
                            <div class="col-md-4">
                                <button class="btn btn-info btn-block mrg-top-80" (click)="realizarCalculo()" >CAMBIAR</button>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
            <div class="card modulos" id="transferencias" style="display: none;">
                <div class="card-block">
                    <ul class="list-unstyled list-info">
                        <li>
                            <span class="thumb-img pdd-top-10">
                                <i class="ti-control-shuffle text-primary font-size-30"></i>
                            </span>
                            <div class="info">
                                <b class="text-dark font-size-22">Transferencias</b>
                                <p class="no-mrg-btm ">A cuentas extranjeras</p>
                            </div>
                        </li>
                    </ul>
                    <div class="mrg-top-10" style="min-height: 470px;">
                        <form #FormTransferencia="ngForm">
                            <input type="text" hidden placeholder="Valor a Transferir" class="form-control" name="Identificacion_Funcionario" ngModel="{{IdentificacionFuncionario}}">
                            <input type="text" hidden placeholder="Valor a Transferir" class="form-control" name="Id_Oficina" ngModel="{{IdOficina}}">
                            <input type="text" hidden placeholder="Valor a Transferir" class="form-control" name="Id_Caja" ngModel="{{IdCaja}}">
                            <input type="text" hidden placeholder="Valor a Transferir" class="form-control" name="Estado" ngModel="{{Estado}}">
                            <div class="row"> 
                                <div class="col-md-3">
                                    <label>Forma de Pago</label>
                                    <select class="form-control" name="Forma_Pago" [(ngModel)]="formaPagoDefault" (click)="boolFormaPago=true" required #formaPago="ngModel">
                                        <option value="Efectivo">Efectivo</option>
                                        <option value="Credito">Credito</option>
                                        <option value="Consignacion">Consignación</option>
                                    </select>
                                    <div *ngIf="formaPago.value=='' && boolFormaPago==true" style="color:red">Campo inválido</div>
                                </div>
                                <div class="col-md-6">
                                    <label>Recibe Para</label>
                                    <select class="form-control" (change)="SeleccionarTipo($event.target.value)" name="Recibe_Para" [(ngModel)]="recibeParaDefault"
                                        (click)="boolRecibePara=true" required #recibePara="ngModel">
                                        <option value="Transferencia">Transferencia</option>
                                        <option value="Cliente">Cliente</option>
                                    </select>
                                    <div *ngIf="recibePara.value=='' && boolRecibePara==true" style="color:red">Campo inválido</div>
                                </div>
                                <div class="col-md-6" *ngIf="Recibe==='Cliente'">
                                    <label>Seleccione Cliente</label>
                                    <select class="form-control" name="Id_Tercero" [(ngModel)]="seleccioneClienteDefault" (click)="boolSeleccioneCliente=true"
                                        required #seleccioneCliente="ngModel">
                                        <option value="">Seleccione un cliente</option>
                                        <option *ngFor="let Cliente of Clientes" [value]="Cliente.Id_Tercero">{{Cliente.Nombre}}</option>
                                    </select>
                                    <div *ngIf="seleccioneCliente.value=='' && boolSeleccioneCliente==true" style="color:red">Campo inválido</div>
                                </div>
                            </div>
                            <hr class="mrg-top-10 mrg-btm-10">
                            <div *ngIf="Recibe==='Transferencia'">
                                <h5>Destinatarios</h5>
                                <div *ngFor="let Envio of Envios; let i= index">
                                    <div class="row mrg-top-10">
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label>Número Documento</label>
                                                <input type="text" class="form-control" 
                                                    name="Destino{{i}}" 
                                                    id="Destino{{i}}" 
                                                    (blur)="LlenarValoresDestinatario($event.target.value, i)"
                                                    [(ngModel)]="Envio.Destino" 
                                                    [ngbTypeahead]="search"
                                                    [resultTemplate]="rt-destino" 
                                                    [inputFormatter]="formatter-destino" 
                                                    (ngModelChange)="AutoCompletarDestinatario(Envio.Destino, i)"
                                                    >

                                                <!-- <input  type="text" 
                                                    placeholder="Número Documento" class="form-control" [(ngModel)]="Envio.Numero_Documento_Destino"
                                                    list="browsers"
                                                    
                                                   required #numeroDocumento="ngModel"> -->

                                                <div *ngIf="(numeroDocumento.value=='' && boolNumeroDocumento==true) || numeroDocumento.value.length < 5" style="color:red">Campo inválido</div>
                                                <div *ngIf="!numeroDocumento.value=='' && numeroDocumento.value.length >= 5" style="color:green">Datos correctos!</div>
                                                <datalist id="browsers" (select)="LlenarValoresDestinatario($event.target.value)">
                                                    <option *ngFor="let Destinatario of DestinatariosFiltrados" [value]="Destinatario.Id_Destinatario">{{Destinatario.Nombre}}</option>
                                                </datalist>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                                <div class="form-group">
                                                    <label>Nombre</label>
                                                    <input name="Nombre_Destino{{i}}" type="text" 
                                                    placeholder="Nombre" class="form-control" required list="browsers1"
                                                    (ngModelChange)="AutoCompletarDestinatario($event)" (blur)="LlenarValoresDestinatario($event.target.value, i)">
                                                </div>
                                         </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label>Cuenta</label>
                                                <select name="Id_Cuenta_Destino{{i}}" [(ngModel)]="Envio.Id_Cuenta_Destino" class="form-control" autocomplete="off" (click)="boolCuenta=true"
                                                    required #cuenta="ngModel">
                                                    <option value="">Seleccione una cuenta</option>
                                                    <option *ngFor="let Cuenta of Envio.Cuentas" [value]="Cuenta.Id_Cuenta_Destinatario">{{Cuenta.Numero_Cuenta}}</option>
                                                </select>
                                                <div *ngIf="cuenta.value=='' && boolCuenta==true" style="color:red">Campo inválido</div>
                                                <div *ngIf="!cuenta.value==''" style="color:green">Datos correctos!</div>
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>Valor</label>
                                                <input type="number" placeholder="Valor a Transferir" (ngModelChange)="AutoCompletarDestinatario($event)" class="form-control"
                                                    name="Valor_Transferencia{{i}}" [(ngModel)]="Envio.Valor_Transferencia" (blur)=NuevoDestinatario()
                                                    (click)="boolValor=true" required #valor="ngModel">
                                                <div *ngIf="valor.value=='' && boolValor==true" style="color:red">Campo inválido</div>
                                                <div *ngIf="!valor.value==''" style="color:green">Datos correctos!</div>
                                            </div>
                                        </div>
                                        <div class="col-md-1">
                                                <p></p>
                                                <button class="btn-danger btn-mini" (click)="EliminarDestinatario(i)"><i class="fa fa-trash"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr class="mrg-top-10 mrg-btm-10">
                            <h5>Datos del Cambio</h5>
                            <div class="row mrg-top-20">
                                <div class="col-md-4">
                                    <div class="form-group text-center">
                                        <label>Moneda Recibida</label>
                                        <select class="form-control" id="Moneda_Origen" name="Moneda_Origen" ngModel="{{MonedaRecibida}}" (change)="SeleccionarMonedaRecibe($event.target.value)"
                                            (click)="boolMonedaRecibida=true" required #monedaRecibida="ngModel">
                                            <option value="">Seleccione una Moneda</option>
                                            <option *ngFor="let Moneda of Monedas" [value]="Moneda.Id_Moneda">{{Moneda.Nombre}}</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <!--Revisar Id?-->
                                        <input id="Cantidad_Recibida" type="number" min=0 (ngModelChange)="RealizarCambio($event, 'transferir')" autocomplete="off"
                                            placeholder="Precio" class="form-control" [(ngModel)]="CantidadRecibida" name="Cantidad_Recibida"
                                            (click)="boolCantidadRecibida=true" required #cantidadRecibida="ngModel">
                                        <div *ngIf="monedaRecibida.value=='' && boolMonedaRecibida==true" style="color:red">Moneda incorrecta</div>
                                        <div *ngIf="!monedaRecibida.value==''" style="color:green">Moneda correcta!</div>
                                        <div *ngIf="cantidadRecibida.value=='' && boolCantidadRecibida==true" style="color:red">Cantidad recibida incorrecta</div>
                                        <div *ngIf="!cantidadRecibida.value==''" style="color:green">Cantidad recibida correcta!</div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group text-center">
                                        <label>Tasa de Cambio</label>
                                        <input type="text" autocomplete="off" class="form-control" name="Tasa_Cambio" ngModel="{{PrecioSugerido}}" readonly>
                                    </div>
                                    <div class="form-group text-center" *ngIf="MonedaRecibe==='Pesos'">
                                        <label>Comisión</label>
                                        <input type="number" class="form-control" name="Costo_Transferencia" ngModel="{{Costo}}">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group text-center">
                                        <label>Moneda de Transferencia</label>
                                        <select class="form-control" name="Moneda_Destino" ngModel="{{MonedaTransferencia}}" (change)="RealizarCambio($event.target.selectedIndex, 'recibir')"
                                            (click)="boolMonedaTransferencia=true" required #monedaTransferencia="ngModel">
                                            <option value="">Seleccione una Moneda</option>
                                            <option *ngFor="let Moneda of Monedas" [value]="Moneda.Nombre">{{Moneda.Nombre}}</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <input id="Cantidad_Transferida" (blur)="NuevoDestinatario()" autocomplete="off" 
                                            type="number" min=0 placeholder="Precio" class="form-control" [(ngModel)]="CantidadTransferida"
                                            name="Total_Transferencia" (click)="boolCantidadTransferencia=true" required #cantidadTransferencia="ngModel">
                                        <div *ngIf="monedaTransferencia.value=='' && boolMonedaTransferencia==true" style="color:red">Moneda incorrecta</div>
                                        <div *ngIf="!monedaTransferencia.value==''" style="color:green">Moneda correcta!</div>
                                        <div *ngIf="cantidadTransferencia.value=='' && boolCantidadTransferencia==true" style="color:red">Cantidad recibida incorrecta</div>
                                        <div *ngIf="!cantidadTransferencia.value==''" style="color:green">Cantidad recibida correcta!</div>
                                    </div>
                                </div>
                            </div>
                            <hr class="mrg-top-10 mrg-btm-10">
                            <h5>Datos del Remitente</h5>
                            <div class="row mrg-top-20">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Número Documento</label>
                                        <input type="text" placeholder="Número Documento" class="form-control" name="Numero_Documento_Origen" ngModel autocomplete="off" [(ngModel)]="NumeroDocumentoR"
                                            required list="remitentes" (ngModelChange)="AutoCompletarRemitente($event)" (blur)="LlenarValoresRemitente($event.target.value, i)"
                                            (click)="boolNumeroDocumentoR=true" required #numeroDocumentoR="ngModel">
                                        <datalist id="remitentes" (select)="LlenarValoresRemitente($event.target.value)">
                                            <option *ngFor="let Remitentente of RemitentesFiltrados" [value]="Remitentente.Id_Transferencia_Remitente">{{Remitentente.Nombre}}</option>
                                        </datalist>
                                        <div *ngIf="(numeroDocumentoR.value=='' && boolNumeroDocumentoR==true) || numeroDocumentoR.value.length < 5" style="color:red">Campo inválido</div>
                                        <div *ngIf="!numeroDocumentoR.value=='' && numeroDocumentoR.value.length >= 5" style="color:green">Datos correctos!</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Nombre</label>
                                        <input type="text" placeholder="Nombre Remitente" readonly autocomplete="off" class="form-control" name="Persona_Envia" ngModel="{{DatosRemitente.Nombre}}">
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Teléfono</label>
                                        <input type="text" placeholder="Teléfono Remitente" readonly autocomplete="off" class="form-control" name="Telefono_Envia"
                                            ngModel="{{DatosRemitente.Telefono}}">
                                    </div>
                                </div>
                            </div>
                            <div class="row mrg-top-20">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label>Observaciones</label>
                                        <textarea placeholder="Observaciones" class="form-control" autocomplete="off" name="Detalle" ngModel>
                                        </textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="row mrg-top-20" *ngIf="Recibe==='Transferencia'">
                                <div class="col-md-12">
                                    <button class="btn btn-info btn-sm btn-block" [disabled]="formaPago.value==''" [swal]="{title : '¿Está seguro?', text: 'Se dispone a registrar la transferencia' , type : 'warning', showCancelButton : true , confirmButtonText: 'Sí, guardar',cancelButtonText: '¡No, déjame comprobar!'}"
                                        (confirm)="GuardarTransferencia(FormTransferencia)">Guardar Transferencia</button>
                                </div>
                            </div>
                            <div class="row mrg-top-20" *ngIf="Recibe==='Cliente'">
                                <div class="col-md-12">
                                    <button class="btn btn-info btn-sm btn-block" [disabled]="formaPago.value==''" [swal]="{title : '¿Está seguro?', text: 'Se dispone a registrar la transferencia' , type : 'warning', showCancelButton : true , confirmButtonText: 'Sí, guardar',cancelButtonText: '¡No, déjame comprobar!'}"
                                        (click)="GuardarMovimiento(FormTransferencia)">Guardar Movimiento</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="card modulos" id="giros" style="display: none;">
                <div class="card-block">
                    <ul class="list-unstyled list-info">
                        <li>
                            <span class="thumb-img pdd-top-10">
                                <i class="ti-wallet text-success font-size-30"></i>
                            </span>
                            <div class="info">
                                <b class="text-dark font-size-22">Giros</b>
                                <p class="no-mrg-btm">Envío/Recepción Dinero</p>
                            </div>
                        </li>
                    </ul>
                    <div class="mrg-top-30" style="min-height: 470px;">
                        <div class="row">
                            <div class="col-md-6">
                                <form #FormGiroRemitente="ngForm">
                                    <button class="btn btn-sm btn-success pull-right">
                                        <i class="ti ti-hand-point-up"></i>
                                    </button>
                                    <h4>Remitente</h4>
                                    <hr>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label>Número de documento</label>
                                                <input type="text" placeholder="Ejem: 1100543987" class="form-control" name="Documento_Remitente" ngModel="">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label>Nombre Completo</label>
                                                <input type="text" placeholder="Ejem: Pepito Perez" class="form-control" name="Nombre" ngModel="">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label>Teléfono</label>
                                                <input type="text" placeholder="Ejem: 318 3555555" class="form-control" name="Telefono" ngModel="">
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="col-md-6">
                                <form #FormGiroDestinatario="ngForm">
                                    <h4>Destinatario</h4>
                                    <hr>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label>Número de Documento</label>
                                                <input type="text" placeholder="Ejem: 93567876" class="form-control" name="Documento_Destinatario" ngModel>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label>Nombre Completo</label>
                                                <input type="text" placeholder="Ejem: Juan Sanchez" class="form-control" name="Nombre" ngModel="">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label>Teléfono</label>
                                                <input type="text" placeholder="Ejem: 6543424" class="form-control" name="Telefono" ngModel="">
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <hr>
                        <h4>Datos del giro</h4>
                        <form #FormGiro="ngForm">
                            <div class="row" hidden>
                                <div class="col-md-4" hidden>
                                    <div class="form-group">
                                        <label>Identificación</label>
                                        <input name="Identificacion_Funcionario" type="text" placeholder="Identificación" class="form-control" ngModel="{{IdentificacionFuncionario}}"
                                            required>
                                    </div>
                                </div>
                                <div class="col-md-4" hidden>
                                    <div class="form-group">
                                        <label>Oficina</label>
                                        <input name="Id_Oficina" type="text" placeholder="Identificación" class="form-control" ngModel="{{IdOficina}}" required>
                                    </div>
                                </div>
                                <div class="col-md-4" hidden>
                                    <div class="form-group">
                                        <label>Caja</label>
                                        <input name="Id_Caja" type="text" placeholder="Identificación" class="form-control" ngModel="{{IdCaja}}" required>
                                    </div>
                                </div>
                                <div class="col-md-4" hidden>
                                    <div class="form-group">
                                        <label>Estado</label>
                                        <input name="Estado" type="text" placeholder="Identificación" class="form-control" ngModel="{{Estado}}" required>
                                    </div>
                                </div>
                            </div>
                            <div class="row mrg-top-20">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Valor a Enviar</label>
                                        <input type="text" placeholder="Precio" class="form-control" name="Valor_Recibido" ngModel="" (blur)="CalcularTotal($event.target.value)">
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Comisión</label>
                                        <input type="text" placeholder="Precio" class="form-control" name="Comision" ngModel="{{Costo}}" readonly>
                                    </div>
                                </div>
                                <div class="col-md-1">
                                    <div class="form-group text-center">
                                        <label>Libre</label>
                                        <input type="checkbox" placeholder="Precio" class="form-control">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Total</label>
                                        <input type="text" placeholder="Precio" class="form-control" readonly name="Valor_Total" ngModel="{{ValorTotal}}">
                                    </div>
                                </div>
                                <div class="col-md-4" hidden>
                                    <div class="form-group">
                                        <label>Entregado</label>
                                        <input type="text" placeholder="valor" class="form-control" name="Valor_Entrega" ngModel="{{ValorEntrega}}" readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label>Observaciones</label>
                                        <textarea placeholder="Observaciones" class="form-control" name="Detalle" ngModel>
                                            </textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <button type="submit" class="btn btn-sm btn-success btn-block" (click)="RealizarGiro(FormGiroRemitente, FormGiroDestinatario, FormGiro)">Hacer giro</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="card modulos" id="traslados" style="display: none;">
                <div class="card-block">
                    <ul class="list-unstyled list-info">
                        <li>
                            <span class="thumb-img pdd-top-10">
                                <i class="ti-reload text-info font-size-30"></i>
                            </span>
                            <div class="info">
                                <b class="text-dark font-size-22">Traslados</b>
                                <p class="no-mrg-btm">Entre Cajas de la Empresa</p>
                            </div>
                        </li>
                    </ul>
                    <div class="mrg-top-30" style="min-height: 470px;">
                        <form #FormTraslado="ngForm">
                            <h4>Datos del traslado</h4>
                            <div class="col-md-4" hidden>
                                <div class="form-group">
                                    <label>Cajero Origen</label>
                                    <select name="Id_Cajero_Origen" class="form-control" name="Id_Cajero_Origen" ngModel="{{IdCaja}}">
                                        <option value="">seleccione una opción</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Cajero de destino</label>
                                        <select name="Id_Cajero_Destino" class="form-control" ngModel="">
                                            <option value="">seleccione una opción</option>
                                            <option *ngFor="let Caja of Cajas" value="{{Caja.Id_Caja}}">{{Caja.Nombre}}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Moneda</label>
                                        <select name="Id_Moneda" class="form-control" ngModel="">
                                            <option value="">Seleccione una Opción</option>
                                            <option *ngFor="let Moneda of Monedas" value="{{Moneda.Id_Moneda}}">{{Moneda.Nombre}}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Valor</label>
                                        <input name="Valor" type="text" placeholder="$ 100.000" class="form-control" ngModel="" required>
                                    </div>
                                </div>
                            </div>
                            <div class="row mrg-top-20">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label>Observaciones</label>
                                        <textarea placeholder="Observaciones" class="form-control" name="Detalle" ngModel="" style="min-height:150px !important;"></textarea>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label>&nbsp;</label>
                                        <button type="submit" class="btn btn-sm btn-info btn-block" (click)="RealizarTraslado(FormTraslado)">Hacer traslado</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="card modulos" id="corresponsal" style="display: none;">
                <div class="card-block">
                    <ul class="list-unstyled list-info">
                        <li>
                            <span class="thumb-img pdd-top-10">
                                <i class="ti-money text-warning font-size-30"></i>
                            </span>
                            <div class="info">
                                <b class="text-dark font-size-22">Corresponsal Bancario</b>
                                <p class="no-mrg-btm">Saldo del día</p>
                            </div>
                        </li>
                    </ul>
                    <div class="mrg-top-30" style="min-height: 470px;">
                        <form #FormCorresponsal="ngForm">
                            <h4>Datos del corresponsal</h4>
                            <div class="col-md-4" hidden>
                                <div class="form-group">
                                    <label>Cajero Origen</label>
                                    <input type="text" name="id" class="form-control" ngModel="{{IdCorresponsal}}">
                                </div>
                            </div>
                            <div class="col-md-4" hidden>
                                <div class="form-group">
                                    <label>Cajero Origen</label>
                                    <input type="text" name="Identificacion_Funcionario" class="form-control" ngModel="{{IdentificacionFuncionario}}">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Corresponsal</label>
                                        <select name="Id_Corresponsal_Bancario" class="form-control" ngModel="{{CorresponsalBancario}}" (change)="ConsultarCorresponsal($event.target.value)">
                                            <option value="">seleccione un corresponsal</option>
                                            <option *ngFor="let CorresponsalBancario of CorresponsalesBancarios" value="{{CorresponsalBancario.Id_Corresponsal_Bancario}}">{{CorresponsalBancario.Nombre}}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Valor</label>
                                        <input name="Valor" type="text" placeholder="Comisión" class="form-control" ngModel="{{ValorCorresponsal}}">
                                    </div>
                                </div>
                            </div>
                            <div class="row mrg-top-20">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label>Detalles</label>
                                        <textarea placeholder="Observaciones" class="form-control" name="Detalle" ngModel="{{DetalleCorresponsal}}">
                                            </textarea>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label>&nbsp;</label>
                                        <button type="submit" class="btn btn-sm btn-info btn-block" (click)="GuardarCorresponsal(FormCorresponsal)">Guardar</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="card modulos" id="servicios" style="display: none;"gi>
                <div class="card-block">
                    <ul class="list-unstyled list-info">
                        <li>
                            <span class="thumb-img pdd-top-10">
                                <i class="ti-truck text-danger font-size-30"></i>
                            </span>
                            <div class="info">
                                <b class="text-dark font-size-22">Servicios Externos</b>
                                <p class="no-mrg-btm">Consignaciones, Pagos, Trámites</p>
                            </div>
                        </li>
                    </ul>
                    <div class="mrg-top-30" style="min-height: 470px;">
                        <form #FormServicio="ngForm">
                            <h4>Datos del servicio</h4>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Servicio</label>
                                        <select name="Servicio_Externo" class="form-control" ngModel="" (change)="AsignarComisionServicioExterno($event.target.value)">
                                            <option value="">seleccione un servicio</option>
                                            <option *ngFor="let ServicioExterno of ServiciosExternos" value="{{ServicioExterno.Id_Servicio_Externo}}">{{ServicioExterno.Nombre}}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Comisión</label>
                                        <input name="Comision" type="text" placeholder="Comisión" class="form-control" ngModel="{{ComisionServicioExterno}}" readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Moneda</label>
                                        <select name="Moneda" class="form-control" ngModel="">
                                            <option value="">seleccione una opción</option>
                                            <option *ngFor="let Moneda of Monedas" value="{{Moneda.Nombre}}">{{Moneda.Nombre}}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Valor</label>
                                        <input type="text" class="form-control" name="Valor" ngModel="">
                                    </div>
                                </div>
                            </div>
                            <div class="row mrg-top-20">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label>Observaciones</label>
                                        <textarea placeholder="Observaciones" class="form-control" name="Detalle" ngModel="">
                                            </textarea>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label>&nbsp;</label>
                                        <button type="submit" class="btn btn-sm btn-info btn-block" (click)="GuardarServicio(FormServicio)">Guardar</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #rt-destino let-r="result" let-t="term">
    <span class="f-9">{{ r.Id_Destinatario }}
        <strong>{{r.Nombre}}</strong>
    </span>
</ng-template>


<app-modal-basic [dialogClass]="'modal-lg'" id="ModalDestinatario" #ModalDestinatario>
    <div class="app-modal-header">
        <button class="btn-close" style="position: absolute; right: 0; background-color: transparent; color: black; font-weight: 900; text-align: center; border-style: none"
            (click)="OcultarFormularios()">X</button>
        <h4>Nuevo Destinatario</h4>
    </div>
    <div class="app-modal-body" id="Destinatario" style="max-height: calc(100vh - 210px); overflow-y: auto;">
        <form #FormDestinatario="ngForm">
            <div class="row">
                <div class="col-md-6" hidden>
                    <div class="form-group">
                        <label>indice</label>
                        <input type="text" placeholder="Identificación Cliente" class="form-control" name="Id_Destinatario" ngModel="{{Cedula}}">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Identificación</label>
                        <input type="text" placeholder="Identificación Cliente" class="form-control" name="Id_Destinatario" ngModel="{{Cedula}}"
                            (focusout)="boolId = true" required #identificacion="ngModel">
                        <div *ngIf="!identificacion.valid && boolId==true" style="color:red">Campo inválido</div>
                        <div *ngIf="identificacion.valid && boolId==true" style="color:green">Datos correctos!</div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Nombre</label>
                        <input type="text" placeholder="Nombre Cliente" class="form-control" name="Nombre" ngModel="" (focusout)="boolNombre = true"
                            required #nombre="ngModel">
                        <div *ngIf="!nombre.valid && boolNombre==true" style="color:red">Campo inválido</div>
                        <div *ngIf="nombre.valid && boolNombre==true" style="color:green">Datos correctos!</div>
                    </div>
                </div>
            </div>
        </form>
        <h3>Cuentas Asociadas</h3>
        <form #FormCuenta="ngForm">
            <div class="row" *ngFor="let Cuenta of Cuentas; let i= index">
                <div class="col-md-3">
                    <div class="form-group">
                        <label>Numero de Cuenta</label>
                        <input type="number" (ngModelChange)="AutoSeleccionarBanco($event, i)" placeholder="Número de Cuenta sin Espacios"
                            step="1" min=0 onkeypress="return event.charCode >= 48 && event.charCode <= 57" class="form-control"
                            name="Numero_Cuenta{{i}}" [(ngModel)]="Cuenta.Numero_Cuenta" (focusout)="boolCuenta = true" required
                            #cuenta="ngModel">
                        <div *ngIf="!cuenta.valid && boolCuenta==true" style="color:red">Campo inválido</div>
                        <div *ngIf="cuenta.valid && boolCuenta==true" style="color:green">Datos correctos!</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label>Tipo de cuenta</label>
                        <select class="form-control" name="Id_Tipo_Cuenta{{i}}" [(ngModel)]="Cuenta.Id_Tipo_Cuenta">
                            <option value="">Seleccione un tipo de cuenta</option>
                            <option *ngFor="let TipoCuenta of TipoCuentas" [value]="TipoCuenta.Id_Tipo_Cuenta">{{TipoCuenta.Nombre}}</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-group">
                        <label>País</label>
                        <select class="form-control" name="Id_Pais{{i}}" [(ngModel)]="Cuenta.Id_Pais" (click)="boolPais=true" required #pais="ngModel">
                            <option value="">Seleccione País</option>
                            <option *ngFor="let Pais of Paises" [value]="Pais.Id_Pais">{{Pais.Nombre}}</option>
                        </select>
                        <div *ngIf="pais.value=='' && boolPais==true" style="color:red">Campo inválido</div>
                        <div *ngIf="!pais.value==''" style="color:green">Datos correctos!</div>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-group">
                        <label>Banco</label>
                        <select class="form-control" name="Id_Banco{{i}}" [(ngModel)]="Cuenta.Id_Banco" (click)="boolBanco=true" required #banco="ngModel" >
                            <option value="">Seleccione Banco</option>
                            <option *ngFor="let Banco of Bancos" [value]="Banco.Id_Banco">{{Banco.Nombre}}</option>
                        </select>
                        <div *ngIf="banco.value=='' && boolBanco==true" style="color:red">Campo inválido</div>
                        <div *ngIf="!banco.value==''" style="color:green">Datos correctos!</div>
                    </div>
                </div>
                <div class="col-md-2">
                    <button class="btn-mini btn-info" (click)="AgregarFormCuenta()"><i class="fa fa-plus"></i></button>
                    <button class="btn-mini btn-danger" (click)="EliminarFormCuenta(i)"><i class="fa fa-trash-o"></i></button>
                </div>
            </div>
        </form>
        <div class="row">
            <div class="col-md-12">
                <div class="form-group">
                    <label>Detalles</label>
                    <textarea class="form-control" id="detalleText" placeholder="Detalles del Destinatario" name="Detalle" [(ngModel)]="Detalle"></textarea>
                </div>
            </div>
        </div>
    </div>
    <div class="app-modal-footer" id="guardar">
        <div class="text-right">
                <button type="button" [swal]="{title : '¿Está seguro?', text: 'Se dispone a registrar un destinatario' , type : 'warning', showCancelButton : true , confirmButtonText: 'Sí, guardar',cancelButtonText: '¡No, déjame comprobar!'}"
                (confirm)="GuardarDestinatario(FormDestinatario)" [disabled]="!nombre.valid || !identificacion.valid" class="btn btn-primary btn-sm btn-block">Guardar</button>
        </div>
    </div>
    
</app-modal-basic>

<app-modal-basic [dialogClass]="'modal-lg'" id="ModalRemitente" #ModalRemitente>
    <div class="app-modal-header">
        <button class="btn-close" style="position: absolute; right: 0; background-color: transparent; color: black; font-weight: 900; text-align: center; border-style: none"
            (click)="OcultarFormularios()">X</button>
        <h4>Nuevo Remitente</h4>
    </div>
    <div class="app-modal-body" style="max-height: calc(100vh - 210px); overflow-y: auto;">
        <form #FormRemitente="ngForm">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Identificación</label>
                        <input type="text" placeholder="Identificación Cliente" class="form-control" name="Id_Transferencia_Remitente" ngModel="{{IdRemitente}}"
                            (focusout)="boolIdR = true" required #identificacionR="ngModel">
                        <div *ngIf="!identificacionR.valid && boolIdR==true" style="color:red">Campo inválido</div>
                        <div *ngIf="identificacionR.valid && boolIdR==true" style="color:green">Datos correctos!</div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Nombre</label>
                        <input type="text" placeholder="Nombre Cliente" class="form-control" name="Nombre" ngModel="" (focusout)="boolNombreR = true"
                            required #nombreR="ngModel">
                        <div *ngIf="!nombreR.valid && boolNombreR==true" style="color:red">Campo inválido</div>
                        <div *ngIf="nombreR.valid && boolNombreR==true" style="color:green">Datos correctos!</div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Teléfono</label>
                        <input type="text" class="form-control" placeholder="Detalles del Destinatario" name="Telefono" ngModel="" (focusout)="boolTelefonoR = true"
                            required #telefonoR="ngModel">
                        <div *ngIf="!telefonoR.valid && boolTelefonoR==true" style="color:red">Campo inválido</div>
                        <div *ngIf="telefonoR.valid && boolTelefonoR==true" style="color:green">Datos correctos!</div>
                    </div>
                </div>
            </div>
            <hr>
        </form>
    </div>
    <div class="app-modal-footer" id="guardar">
        <div class="text-right">
            <button class="btn btn-primary btn-sm" [disabled]="!nombreR.valid || !identificacionR.valid || !telefonoR.valid" [swal]="{title : '¿Está seguro?', text: 'Se dispone a registrar un remitente' , type : 'warning', showCancelButton : true , confirmButtonText: 'Sí, guardar',cancelButtonText: '¡No, déjame comprobar!'}"
                (confirm)="GuardarRemitente(FormRemitente)">Guardar</button>
        </div>
    </div>
</app-modal-basic>

<swal #warnSwal title="Documento invalido" text="El documento ingresado debe tener una longitud mínima de 5 números" type="warning">
</swal>

<swal #warnTotalSwal title="Valor invalido" text="El valor total de la transferencia no es suficiente para realizar las transferencias individuales."
    type="warning">
</swal>

<swal #destinatarioCreadoSwal title="El destinatario a sido creado" text="Ahora podra ingresar el documento del destinatario para una nueva transferencia."
    type="success">
</swal>

<swal #transferenciaExitosaSwal title="La transferencia se realizo con exito" text="Se ha registrado exitosamente la transferencia"
    type="success" (confirm)="ResetValues()">
</swal>

<swal #movimientoExitosoSwal title="El movimiento se realizo con exito" text="Se ha registrado exitosamente el movimiento"
    type="success">
</swal>

<swal #remitenteCreadoSwal title="El remitente a sido creado" text="Ahora podra ingresar el documento del remitente para una nueva transferencia."
    type="success">
</swal>

<swal #bancoNoIdentificadoSwal title="Número de cuenta incorrecto" text="El número de cuenta introducido no coincide con ninguno de los bancos en nuestra base de datos."
    type="warning">
</swal>

<swal #errorSwal title="Error al guardar" text="Se ha generado un error al intentar guardar el documento" type="error">
</swal>